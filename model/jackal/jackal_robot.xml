<mujoco model="jackal">
	<compiler angle="radian" meshdir="meshes/" />

    <asset>
        <!--Meshes-->
        <mesh name="base" file="jackal-base.stl" />
        <mesh name="wheel" file="jackal-wheel.stl" />
        <mesh name="fender" file="jackal-fender.stl" />
    </asset>

	<worldbody>
		<body name="jackal" pos="0 0 0.1" quat="1 0 0 0">
            <site name="jackal" pos="0 0 0" />
            <freejoint name="jackal" />

            <geom pos="0 0 -0.0655" quat="0.5 0.5 0.5 0.5" type="mesh" contype="0" conaffinity="0" group="1" rgba="0.15 0.15 0.15 1" mesh="base"/>
            <geom pos="0 0 0" quat="0 0 0 1" type="mesh" contype="0" conaffinity="0" group="1" rgba="1.0 0.7 0 1" mesh="fender"/>
            <geom pos="0 0 0" quat="1 0 0 0" type="mesh" contype="0" conaffinity="0" group="1" rgba="1.0 0.7 0 1" mesh="fender"/>
            <geom pos="0.131 0.187795 0.0345" quat="0.707107 0.707107 0 0" type="mesh" contype="0" conaffinity="0" group="1" rgba="0.15 0.15 0.15 1" mesh="wheel"/>
            <geom pos="0.131 -0.187795 0.0345" quat="0.707107 0.707107 0 0" type="mesh" contype="0" conaffinity="0" group="1" rgba="0.15 0.15 0.15 1" mesh="wheel"/>
            <geom pos="-0.131 0.187795 0.0345" quat="0.707107 0.707107 0 0" type="mesh" contype="0" conaffinity="0" group="1" rgba="0.15 0.15 0.15 1" mesh="wheel"/>
            <geom pos="-0.131 -0.187795 0.0345" quat="0.707107 0.707107 0 0" type="mesh" contype="0" conaffinity="0" group="1" rgba="0.15 0.15 0.15 1" mesh="wheel"/>

            <body name="chassis">
                <geom name="chassis" size="0.21 0.155 0.092" pos="0 0 0.092" type="box" rgba="0.2 0.2 0.2 1" group="5" /> 
                <inertial pos="0.012 0.002 0.067" mass="16.523" fullinertia="0.3136 0.3922 0.4485 -0.0008 0.0164 -0.0009" />
            </body>
            
            <body name="front_left_wheel" pos="0.131 0.187795 0.0345">
                <joint type="hinge" name="front_left_wheel" axis="0 1 0"/>
                <geom type="cylinder" name="front_left_wheel" size="0.098 0.02" quat="0.707107 0.707107 0 0" group="5" condim="4"/>
                <inertial pos="0 0 0" mass="0.477" fullinertia="0.0013 0.0024 0.0013 0 0 0" />
            </body>
            <body name="front_right_wheel" pos="0.131 -0.187795 0.0345">
                <joint type="hinge" name="front_right_wheel" axis="0 1 0"/>
                <geom type="cylinder" name="front_right_wheel" size="0.098 0.02" quat="0.707107 0.707107 0 0" group="5" condim="4"/>
                <inertial pos="0 0 0" mass="0.477" fullinertia="0.0013 0.0024 0.0013 0 0 0" />
            </body>
            <body name="rear_left_wheel" pos="-0.131 0.187795 0.0345">
                <joint type="hinge" name="rear_left_wheel" axis="0 1 0"/>
                <geom type="cylinder" name="rear_left_wheel" size="0.098 0.02" quat="0.707107 0.707107 0 0" group="5" condim="4"/>
                <inertial pos="0 0 0" mass="0.477" fullinertia="0.0013 0.0024 0.0013 0 0 0" />
            </body>
            <body name="rear_right_wheel" pos="-0.131 -0.187795 0.0345">
                <joint type="hinge" name="rear_right_wheel" axis="0 1 0"/>
                <geom type="cylinder" name="rear_right_wheel" size="0.098 0.02" quat="0.707107 0.707107 0 0" group="5" condim="4"/>
                <inertial pos="0 0 0" mass="0.477" fullinertia="0.0013 0.0024 0.0013 0 0 0" />
            </body>
		</body>
	</worldbody>

    <sensor>
        <!-- Used for observation -->
        <accelerometer site="jackal" name="accelerometer"/>
        <velocimeter site="jackal" name="velocimeter"/>
        <gyro site="jackal" name="gyro"/>
    </sensor>

    <tendon>
        <fixed name="left_differential">
            <joint joint="front_left_wheel" coef="1" />
            <joint joint="rear_left_wheel" coef="1" />
        </fixed>

        <fixed name="right_differential">
            <joint joint="front_right_wheel" coef="1" />
            <joint joint="front_left_wheel" coef="1" />
        </fixed>
    </tendon>

    <!--ACTUATORS-->
    <actuator>
        <velocity joint="front_left_wheel" name="front_left_wheel" ctrlrange="-20 20" ctrllimited="true" />
        <velocity joint="front_right_wheel" name="front_right_wheel" ctrlrange="-20 20" ctrllimited="true" />
        <velocity joint="rear_right_wheel" name="rear_right_wheel" ctrlrange="-20 20" ctrllimited="true" />
        <velocity joint="rear_left_wheel" name="rear_left_wheel" ctrlrange="-20 20" ctrllimited="true" />

        <!--
        <velocity joint="left_differential" ctrlrange="-20 20" ctrllimited="true" />
        <velocity joint="right_differential" ctrlrange="-20 20" ctrllimited="true" />
        -->
    </actuator>
</mujoco>